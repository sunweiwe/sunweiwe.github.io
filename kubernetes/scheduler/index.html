<!doctype html><html lang=en-us>
<head>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.7.0/style.min.css>
<link rel=stylesheet href=//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/styles/default.min.css>
<script defer crossorigin=anonymous src=//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/highlight.min.js onload=hljs.highlightAll()></script>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>kubernetes scheduler</title>
<link rel=stylesheet href=https://sunweiwe.github.io/style.min.d9712c7529c6273cae9cbd0ed688f97cbe37e248317298145303b71169db98c5.css integrity="sha256-2XEsdSnGJzyunL0O1oj5fL434kgxcpgUUwO3EWnbmMU=" media=screen>
<link rel="shortcut icon" type=image/x-icon href=favicon.ico>
</head>
<body>
<script>localStorage.getItem("prefer-theme")==="light"&&document.body.classList.remove('dark')</script>
<header>
<div class=header-common>
<div>
┏━━━━━━━━━━━━━━━┓<br>
┇ <a class=logo href=https://sunweiwe.github.io/>sunweiwe/blog</a> ┇
<button id=theme-toggle text=toggle><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
<br>
┗━━━━━━━━━━━━━━━┛
</div>
<div>关于代码，关于生活.</div><br>
</div>
<p>
<nav>
<a href=https://sunweiwe.github.io/><b>Home</b></a>
| <a href=/posts/><b>Posts</b></a>
| <a href=/tags/><b>Tags</b></a>
| <a href=/search/><b>Search</b></a>
</nav>
</p>
</header>
<main>
<article class=post-content>
<h1 class=title>kubernetes scheduler</h1>
<b><time>24.02.2023</time></b>
<a href=/%20/tags/kubernetes>#kubernetes</a>
<a href=/%20/tags/scheduler>#scheduler</a>
<div>
<p>kubernetes scheduler</p>
<h2 id=调度器配置>调度器配置 </h2><p>你可以通过编写配置文件，并将其路径传给 kube-scheduler 的命令行参数，定制 kube-scheduler 的行为。</p>
<p>调度模板（Profile）允许你配置 kube-scheduler 中的不同调度阶段。每个阶段都暴露于某个扩展点中。插件通过实现一个或多个扩展点来提供调度行为。</p>
<p>你可以通过运行 kube-scheduler &ndash;config 来设置调度模板， 使用 KubeSchedulerConfiguration（v1beta3 或 v1）结构体。</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=color:#6ab825;font-weight:700>apiVersion</span>:<span style=color:#666> </span>kubescheduler.config.k8s.io/v1<span style=color:#666>
</span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>kind</span>:<span style=color:#666> </span>KubeSchedulerConfiguration<span style=color:#666>
</span><span style=color:#666></span><span style=color:#6ab825;font-weight:700>clientConnection</span>:<span style=color:#666>
</span><span style=color:#666>  </span><span style=color:#6ab825;font-weight:700>kubeconfig</span>:<span style=color:#666> </span>/etc/srv/kubernetes/kube-scheduler/kubeconfig<span style=color:#666>
</span><span style=color:#666></span>说明：<span style=color:#666>
</span></code></pre></div><h3 id=配置文件>配置文件 </h3><p>调度行为发生在一系列阶段中，这些阶段是通过以下扩展点公开的：</p>
<h4 id=扩展点>扩展点 </h4><ul>
<li>queueSort：这些插件对调度队列中的悬决的 Pod 排序。 一次只能启用一个队列排序插件。</li>
<li>preFilter：这些插件用于在过滤之前预处理或检查 Pod 或集群的信息。 它们可以将 Pod 标记为不可调度。</li>
<li>filter：这些插件相当于调度策略中的断言（Predicates），用于过滤不能运行 Pod 的节点。 过滤器的调用顺序是可配置的。 如果没有一个节点通过所有过滤器的筛选，Pod 将会被标记为不可调度。</li>
<li>postFilter：当无法为 Pod 找到可用节点时，按照这些插件的配置顺序调用他们。 如果任何 postFilter 插件将 Pod 标记为可调度，则不会调用其余插件。</li>
<li>preScore：这是一个信息扩展点，可用于预打分工作。</li>
<li>score：这些插件给通过筛选阶段的节点打分。调度器会选择得分最高的节点。</li>
<li>reserve：这是一个信息扩展点，当资源已经预留给 Pod 时，会通知插件。 这些插件还实现了 Unreserve 接口，在 Reserve 期间或之后出现故障时调用。</li>
<li>permit：这些插件可以阻止或延迟 Pod 绑定。</li>
<li>preBind：这些插件在 Pod 绑定节点之前执行。</li>
<li>bind：这个插件将 Pod 与节点绑定。bind 插件是按顺序调用的，只要有一个插件完成了绑定，其余插件都会跳过。bind 插件至少需要一个。</li>
<li>postBind：这是一个信息扩展点，在 Pod 绑定了节点之后调用。</li>
<li>multiPoint：这是一个仅配置字段，允许同时为所有适用的扩展点启用或禁用插件</li>
</ul>
<h2 id=调度策略>调度策略 </h2><p>调度器通过 Kubernetes 的监测（Watch）机制来发现集群中新创建且尚未被调度到节点上的 Pod。 调度器会将所发现的每一个未调度的 Pod 调度到一个合适的节点上来运行。 调度器会依据下文的调度原则来做出调度选择。</p>
<h3 id=调度流程>调度流程 </h3><ul>
<li>过滤</li>
<li>打分</li>
</ul>
</div>
</article>
</main>
<aside>
<div>
<div>
<h3>LATEST POSTS</h3>
</div>
<div>
<ul>
<li><a href=/image/basic/>image 基础知识</a></li>
<li><a href=/linux/ubuntu/>Ubuntu in docker</a></li>
<li><a href=/kubernetes/scheduler/>kubernetes scheduler</a></li>
<li><a href=/docker/create/>从零开始实现一个可用的 docker</a></li>
<li><a href=/kubernetes/mount/>kubernetes 部署</a></li>
</ul>
</div>
</div>
</aside>
<script src=https://utteranc.es/client.js repo=sunweiwe/sunweiwe.github.io issue-term=pathname label=comments theme=preferred-color-scheme crossorigin=anonymous async></script>
<footer>
------------------------------------------------------
<p>&copy; 2023
<a class=footer-link href=https://sunweiwe.github.io></a>
| <a class=footer-link href=https://github.com/sunweiwe><b>GitHub</b></a>
</span>
</p>
</footer>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>